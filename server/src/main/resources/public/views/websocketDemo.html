<!DOCTYPE html>
<body>
  <h1>WebSocket Demo</h1>
  <pre id="result"></pre>
  <script>
    var protocol;
    if (window.location.protocol == "https:") 
      protocol = "wss";
    else 
      protocol = "ws";

    var uri = protocol + '://' + window.location.host + '/demo-websocket-progress/xyz';

    var socket = new WebSocket(uri)

    socket.onopen = function(event) {
      append("Open");
    }
    socket.onclose = function(event){
      append("Close");
    }
    socket.onerror = function(event){
      append("Error");
      socket.close();
    }

    socket.onmessage = function(event) {
      append(event.data);
    };
    
    function append(event){
      document.getElementById("result").innerHTML += event + "<br>";
    }

  </script>
</body>
