/*
Solarized theme for code-mirror: http://ethanschoonover.com/solarized
Solarized color pallette: http://ethanschoonover.com/solarized/img/solarized-palette.png
*/
@mixin generic-styles($class) {
  .cm-s-solarized {
    color-profile: sRGB;
    rendering-intent: auto;
    .cm-keyword, .cm-atom {
      color: #b58900;
    }
    .cm-number {
      color: #d33682;
    }
    .cm-def {
      color: #268bd2;
    }
    .cm-variable, .cm-variable-2, .cm-variable-3, .cm-property {
      color: #2aa198;
    }
    .cm-operator {
      color: #b58900;
    }
    .cm-comment {
      color: #586e75;
    }
    .cm-string {
      color: #859900;
    }
    .cm-string-2 {
      color: #b58900;
    }
    .cm-meta {
      color: #859900;
    }
    .cm-error, .cm-invalidchar {
      color: #586e75;
      border-bottom: 1px dotted #dc322f;
    }
    .cm-qualifier {
      color: #b58900;
    }
    .cm-builtin {
      color: #d33682;
    }
    .cm-bracket {
      color: #cb4b16;
    }
    .CodeMirror-matchingbracket {
      color: #859900 !important;
      border-bottom-style: solid;
      border-bottom-width: 2px;
    }
    .CodeMirror-nonmatchingbracket {
      color: #dc322f !important;
      border-bottom-style: solid;
      border-bottom-width: 2px;
    }
    .cm-tag {
      color: #93a1a1;
    }
    .cm-attribute {
      color: #2aa198;
    }
    .cm-header {
      color: #586e75;
    }
    .cm-quote {
      color: #93a1a1;
    }
    .cm-hr {
      color: transparent;
      border-top: 1px solid #586e75;
      display: block;
    }
    .cm-link {
      color: #93a1a1;
      cursor: pointer;
    }
    .cm-special {
      color: #6c71c4;
    }
    .cm-em {
      color: #999;
      text-decoration: underline;
      text-decoration-style: dotted;
    }
    .cm-strong {
      color: #eee;
    }
    .cm-tab:before {
      color: #586e75;
    }
    .cm-matchhighlight {
      border-bottom-style: solid;
      border-bottom-width: 2px;
    }
    .CodeMirror-gutters {
      background-color: #073642;
      border-right-color: transparent;
    }
    a {
      color: #268bd2;
    }
    &.cm-s-#{$class} {
      color: $cm-color;
      background-color: $cm-background-color;
      .cm-matchhighlight {
        border-bottom-color: $cm-border-bottom-color;
      }
      .CodeMirror-gutters {
        background-color: $cm-border-bottom-color;
      }
      .CodeMirror-gutter-filler {
        background-color: $cm-gutters-filler-background-color;
      }
      .CodeMirror-selected, .cm-searching {
        background: $cm-selected-background;
      }
      .CodeMirror-activeline-background {
        background-color: $cm-border-bottom-color;
      }
      .CodeMirror-scrollbar-filler {
        background-color: $cm-background-color;
      }
    }
    .CodeMirror-gutters {
      padding: 0 15px 0 10px;
    }
    .CodeMirror-linenumber {
      color: #657b83;
    }
    .CodeMirror-gutter .CodeMirror-gutter-text {
      color: #586e75;
    }
    .CodeMirror-lines .CodeMirror-cursor {
      border-left: 1px solid #586e75;
    }
    &.CodeMirror {
      box-shadow: none;
    }
    &.cm-s-#{$class} {
      .CodeMirror-hints {
        background-color: $cm-border-bottom-color;
      }
      .CodeMirror-widget, .CodeMirror-hint-active {
        color: inherit;
        background-color: $cm-border-bottom-color;
      }
      .CodeMirror-dialog {
        background-color: $cm-border-bottom-color;
        color: $cm-dialog-color;
      }
      .CodeMirror-simplescroll-vertical, .CodeMirror-simplescroll-horizontal, .CodeMirror-hints {
        background: $cm-background-color;
      }
      .CodeMirror-simplescroll-vertical div, .CodeMirror-simplescroll-horizontal div,  .CodeMirror-hints div {
        background: $cm-simplescroll-background;
      }
    }
  }


  .CodeMirror-scroll {
    height: 100%;
    overflow: auto;
  }

  body {
    &.mac kbd.pc, &.pc kbd.mac {
      display: none;
    }
  }

  .CodeMirror {
    background: transparent;
    font-size: 13px;
    font-family: monospace;
    pre {
      -webkit-font-variant-ligatures: contextual;
      font-variant-ligatures: contextual;
    }
  }

  .CodeMirror-code > pre {
    font-size: 0;
    font-size: 13px;
  }

  .CodeMirror-lines {
    padding: 24px;
    .cm-tab {
      visibility: hidden;
    }
  }

  .CodeMirror-linenumber {
    margin-left: -24px;
  }

  .CodeMirror-linewidget {
    .line, .compilation-info, .runtime-error {
      margin-left: -28px;
      width: calc(100% +  28px);
      padding: 10px;
      padding-left: 30px;
      white-space: pre-wrap;
    }
  }

  .CodeMirror-widget .fold {
    margin-left: -28px;
    width: calc(100% +  28px);
    padding: 24px;
    white-space: pre-wrap;
  }

  .CodeMirror-linewidget {
    .line p, .compilation-info p, .runtime-error p {
      display: inline-block;
    }
  }

  .CodeMirror-widget .fold p {
    display: inline-block;
  }

  .CodeMirror-linewidget {
    .line p, .compilation-info p, .runtime-error p {
      padding: 0;
      margin: 0;
    }
  }

  .CodeMirror-widget .fold p {
    padding: 0;
    margin: 0;
  }

  .CodeMirror-linewidget {
    .line pre, .compilation-info pre, .runtime-error pre {
      padding: 0;
      margin: 0;
    }
  }

  .CodeMirror-widget .fold pre {
    padding: 0;
    margin: 0;
  }

  .CodeMirror-linewidget {
    .line h1, .compilation-info h1, .runtime-error h1 {
      padding: 0;
      margin: 0;
    }
  }

  .CodeMirror-widget .fold h1 {
    padding: 0;
    margin: 0;
  }

  .CodeMirror-linewidget {
    .line h2, .compilation-info h2, .runtime-error h2 {
      padding: 0;
      margin: 0;
    }
  }

  .CodeMirror-widget .fold h2 {
    padding: 0;
    margin: 0;
  }

  .CodeMirror-linewidget {
    .line h3, .compilation-info h3, .runtime-error h3 {
      padding: 0;
      margin: 0;
    }
  }

  .CodeMirror-widget .fold h3 {
    padding: 0;
    margin: 0;
  }

  .CodeMirror-linewidget {
    .line h4, .compilation-info h4, .runtime-error h4 {
      padding: 0;
      margin: 0;
    }
  }

  .CodeMirror-widget .fold h4 {
    padding: 0;
    margin: 0;
  }

  .CodeMirror-linewidget {
    .line h5, .compilation-info h5, .runtime-error h5 {
      padding: 0;
      margin: 0;
    }
  }

  .CodeMirror-widget .fold h5 {
    padding: 0;
    margin: 0;
  }

  .CodeMirror-linewidget {
    .line h6, .compilation-info h6, .runtime-error h6 {
      padding: 0;
      margin: 0;
    }
  }

  .CodeMirror-widget .fold h6 {
    padding: 0;
    margin: 0;
  }

  .CodeMirror-linewidget {
    .line ul, .compilation-info ul, .runtime-error ul {
      margin: 0;
    }
  }

  .CodeMirror-widget .fold ul {
    margin: 0;
  }

  .CodeMirror-linewidget {
    .line ol, .compilation-info ol, .runtime-error ol {
      margin: 0;
    }
  }

  .CodeMirror-widget .fold ol {
    margin: 0;
  }

  .CodeMirror-linewidget {
    .line .short, .compilation-info .short, .runtime-error .short {
      padding: 1px 5px 1px 5px;
    }
  }

  .CodeMirror-widget .fold .short {
    padding: 1px 5px 1px 5px;
  }

  .CodeMirror-linewidget {
    .line .block, .compilation-info .block, .runtime-error .block {
      display: block;
    }
  }

  .CodeMirror-widget .fold .block {
    display: block;
  }

  .CodeMirror-linewidget {
    .line pre, .compilation-info pre, .runtime-error pre {
      padding: 10px 0px 10px 12px;
      display: inline-block;
    }
  }

  .CodeMirror-widget .fold pre {
    padding: 10px 0px 10px 12px;
    display: inline-block;
  }

  .CodeMirror {
    .CodeMirror-code > {
      pre > span, div > pre > span {
        font-weight: normal;
      }
    }
    .CodeMirror-linewidget pre {
      font-weight: normal;
    }
    .CodeMirror-code > {
      pre > span > *, div > pre > span > * {
        font-weight: normal;
      }
    }
    .CodeMirror-linewidget {
      pre > * {
        font-weight: normal;
      }
      overflow: visible !important;
      .runtime-error i, .compilation-info.error i {
        color: red;
      }
      .runtime-error.warning i, .compilation-info.warning i {
        color: yellow;
      }
      .runtime-error pre, .compilation-info pre {
        padding-top: 0;
      }
      .runtime-error i, .compilation-info i, .runtime-error pre, .compilation-info pre {
        display: inline-block;
      }
      .runtime-error i, .compilation-info i {
        vertical-align: top;
        font-size: 20px;
      }
      .inline {
        border-radius: 2px;
        position: absolute;
        bottom: 0;
        overflow: hidden;
        margin-left: 20px;
        padding-left: 5px;
      }
      i {
        margin-left: 16px;
        margin-right: 6px;
        font-size: 12px;
      }
    }
  }

  .CodeMirror-hints {
    max-height: 400px;
    border: none;
    .autocomplete {
      display: table-row;
      max-width: none;
      resize: none;
      .name {
        display: table-cell;
      }
      .signature {
        padding-left: 5px;
        display: table-cell;
      }
    }
  }

  .CodeMirror-dialog.CodeMirror-dialog-top {
    border: none;
    margin-left: 56px;
    line-height: 21px;
    padding-left: 2px;
    padding-right: 0;
    span {
      display: none;
    }
    input {
      font-size: 18px;
      padding: 0;
      width: calc(100% -  150px) !important;
    }
  }

  kbd {
    padding: .1em .6em;
    border: 1px solid #ccc;
    font-size: 11px;
    font-family: monospace;
    background-color: #f7f7f7;
    color: #333;
    -moz-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px #ffffff inset;
    -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px #ffffff inset;
    box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px #ffffff inset;
    border-radius: 3px;
    display: inline-block;
    margin: 0 .1em;
    text-shadow: 0 1px 0 #fff;
    line-height: 1.4;
    white-space: nowrap;
  }

  .CodeMirror-simplescroll {
    height: 100%;
    width: 100%;
  }

  .CodeMirror-simplescroll-vertical {
    width: 0px;
  }

  .CodeMirror-simplescroll-horizontal {
    height: 0px;
  }

  .CodeMirror-simplescroll-vertical div {
    width: 10px;
  }

  .CodeMirror-simplescroll-horizontal {
    height: 10px;
  }

  .CodeMirror-simplescroll-vertical div, .CodeMirror-simplescroll-horizontal div, iframe {
    border: none;
  }

  noscript {
    font-size: 40px;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translateX(-50%) translateY(-50%);
  }

  pre .cm-s-solarized.CodeMirror {
      margin-top: 10px;
      margin-bottom: 30px;
    &.cm-s-#{$class} {
      background-color: $cm-s-background-color;
      .CodeMirror-simplescroll-horizontal, .CodeMirror-scrollbar-filler {
        background-color: $cm-s-background-color;
      }
    }
  }
}

